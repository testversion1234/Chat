<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Netiquette-Rollenspiel v9 ‚Äì Mehrere Szenen</title>
  <style>
    :root{
      --bg:#f5f7fb;--card:#ffffff;--ink:#0f172a;--muted:#64748b;
      --accent:#2563eb;--accent2:#4f46e5;--ok:#10b981;--warn:#ef4444;
      --bubble:#eef2ff;--you:#e7f8f0;
    }
    *{box-sizing:border-box}
    body{
      margin:0;background:var(--bg);
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      line-height:1.55;color:var(--ink);
    }
    header{
      padding:28px 16px 24px;
      background:linear-gradient(90deg,var(--accent2),var(--accent));
      color:#fff;text-align:center;box-shadow:0 8px 24px rgba(0,0,0,.2);
    }
    .logo{
      width:110px;height:110px;border-radius:50%;border:5px solid #fff;
      display:block;margin:0 auto 12px;box-shadow:0 6px 20px rgba(0,0,0,.15)
    }
    .scorebox{margin-top:8px;padding:6px 12px;border-radius:999px;
      background:rgba(255,255,255,.18);display:inline-block;font-weight:700}
    main{max-width:960px;margin:-18px auto 28px;padding:0 14px}
    .card{background:#fff;border-radius:16px;padding:18px;
      box-shadow:0 6px 20px rgba(0,0,0,.08);margin-bottom:16px}
    .tag{display:inline-block;padding:4px 10px;border-radius:999px;
      background:#eef2ff;color:#3730a3;font-size:.8rem;margin-bottom:8px}
    .intro h2{margin:.2rem 0 .4rem;font-size:1.1rem}
    .ok{color:var(--ok);font-weight:600}
    .bad{color:var(--warn);font-weight:600}
    #chat{max-height:420px;overflow:auto;padding-right:4px}
    .row{display:flex;gap:12px;margin:10px 0}
    .bot,.you{max-width:78%;padding:12px 14px;border-radius:14px;
      box-shadow:0 4px 14px rgba(15,23,42,.06)}
    .bot{background:var(--bubble);border-top-left-radius:4px}
    .you{background:var(--you);margin-left:auto;border-top-right-radius:4px}
    .controls{display:flex;gap:10px;margin-top:12px}
    .field{flex:1;padding:12px 14px;border:1px solid #dbe2ee;
      border-radius:12px;font-size:1rem}
    .btn{padding:12px 16px;border:none;border-radius:12px;cursor:pointer;
      background:var(--accent);color:#fff;font-weight:700}
    .summary{font-size:.95rem;color:var(--muted)}
  </style>
</head>
<body>
  <header>
    <!-- Eingebettetes Logo -->
    <img class="logo" alt="Logo"
         src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAYAAAA+7o5AAAAACXBIWXMAABYlAAAWJQFJUiTwAAAFw0lEQVR4nO3dQW7bMBCF4dYdE/AH9tI7e6eBGwIVnWCjFJKx6M/sZ+SR5ix0vzHST4AAAAAAAAAAAAAADg52Sp2u+zzS23RrznxXdcJcn/O9IdmV6sMPe0ytfUldPH5HnpDauRpE/evULlbiJczjchDsy02y3L8PaJXYr/wvOErVrbM9eU7M4j3jTe4c86M6OZLnQ53YnmVthWlWt3s4/s6qH88knL/vzzTevnb+1p3vp3L7jG5meTPt9sH/nRr9Rta9qJbRqbN7s/bu7KtW0Kf3ljbfwrn16LZrbV/q42N/J+SeixG5V8zxx4hXPnbN6Wqd9I5i0qz5xd7e62eHuWutZr0UnOr9NbqOqD/V9Yl99KjaZ78lTt3F/XrK2KNdMvgLnpnV9FOzAqLrCucMvh0sVwGOuXM/hlyr6vEZk8JrHOXZeWvhNe/X3U/hz8d/KZ1Ush05dM+STw3THl9I+qLg7W/ErI/k9+U4PLxP+fWve9cNRPiZu5eWp4ZtN4lfZ4udmnFFPteY8OpddS6KxtXqqTg8X/tPVVePrPZnrmeKTnruPrk9/wcuEr7ffVmuz1O0X/3rm/UcfhW+b19tiyYHP/5XlY3H/jnzU73UP82Rk7P1xXqnfNXOVuYz9D6t60+7ufzOZte6fq3HlmM/4mFZ1tzXJ5kHzns/8Rt2WbQnP2pGlzVbNP1zXXO6RfOrfF4kQ7bWvH3tef4fs3d1Oqa/x+vgN3K/b95oXWt2pfkJXfXyTj8AAAAAAAAAAAAAABAz/YHaBgdr5D6J4AAAAASUVORK5CYII=" />
    <div class="scorebox">Score: <span id="score">0</span></div>
    <h1>Netiquette-Rollenspiel</h1>
  </header>

  <main>
    <!-- Einleitung -->
    <section class="card intro">
      <span class="tag">Einf√ºhrung</span>
      <h2>Willkommen ‚Äì so arbeitest du im Chat</h2>
      <p>Hier √ºbst du, wie du <b>freundlich und respektvoll</b> online schreibst. Stell dir vor, du bist im Klassenchat.</p>
      <h3>Deine Regeln</h3>
      <ul>
        <li><span class="ok">Ich-Botschaften:</span> ‚ÄûIch finde‚Ä¶‚Äú, ‚ÄûIch denke‚Ä¶‚Äú</li>
        <li><span class="ok">Nachfragen:</span> ‚ÄûKannst du das erkl√§ren?‚Äú</li>
        <li><span class="ok">Deeskalation & Respekt:</span> ‚ÄûLass uns ruhig bleiben.‚Äú</li>
        <li><span class="ok">Lob & Best√§tigung:</span> ‚ÄûGut gemacht!‚Äú, ‚ÄûDas stimmt.‚Äú</li>
        <li><span class="bad">Vermeiden:</span> BR√úLLEN in ALL CAPS, !!!/???, Emoji-Flut, DU-Unterstellungen, Beleidigungen.</li>
      </ul>
    </section>

    <!-- Chat -->
    <section class="card">
      <span class="tag">Chat</span>
      <div id="chat"></div>
      <div class="controls">
        <input id="userText" class="field" type="text" placeholder="Schreibe deine Antwort..." />
        <button class="btn" id="send">Senden</button>
      </div>
    </section>

    <!-- Auswertung -->
    <section class="card">
      <span class="tag">Live-Auswertung</span>
      <div id="summary" class="summary"></div>
    </section>
  </main>

  <script>
    let score = 0;
    const chat=document.getElementById('chat');
    const input=document.getElementById('userText');
    const sendBtn=document.getElementById('send');
    const scoreEl=document.getElementById('score');
    const summary=document.getElementById('summary');
    const mistakes={caps:0,punct:0,emoji:0,rude:0,du:0};

    const SCENES=[
      "Paul: ‚ÄûH√§? Deine Aufgabe ist doch voll falsch! üôÑ‚Äú",
      "Lisa: ‚ÄûEy, du bist so langsam, mit dir kann man nix anfangen!‚Äú",
      "Max: ‚ÄûNa toll, wieder typisch von dir üòÇüòÇüòÇ‚Äú",
      "Anna: ‚ÄûDein Referat war langweilig.‚Äú"
    ];
    let sceneIndex=0;

    const RUDE_PATTERNS=[
      "doof","bl[o√∂]d","trottel","dumm(?:kopf)?","hirn?los",
      "spacko","spinner","loser","versager","nullchecker",
      "peinlich","armselig","witzfigur","opfer","freak",
      "banause","lappen","noob","idiot","dulli",
      "schei[s√ü][s$]e","kacke","kacka","mistst√ºck",
      "arsch","arschloch","penner","pisser","wichser","schlampe","hure","fotze"
    ].map(s=>new RegExp(s,"i"));

    function addBot(text){const row=document.createElement('div');row.className='row';
      const b=document.createElement('div');b.className='bot';b.textContent=text;
      row.appendChild(b);chat.appendChild(row);chat.scrollTop=chat.scrollHeight;}
    function addYou(text){const row=document.createElement('div');row.className='row';
      const y=document.createElement('div');y.className='you';y.textContent=text;
      row.appendChild(y);chat.appendChild(row);chat.scrollTop=chat.scrollHeight;}
    function setScore(delta){score+=delta;scoreEl.textContent=score;}
    function updateSummary(){summary.innerHTML="BR√úLLEN: "+mistakes.caps+" ¬∑ !!!/???: "+mistakes.punct+" ¬∑ Emojis: "+mistakes.emoji+" ¬∑ Unh√∂flich: "+mistakes.rude+" ¬∑ DU-Unterstellung: "+mistakes.du;}

    function analyzeMessage(msg){
      const result={delta:0,notes:[]};
      if(/[A-Z√Ñ√ñ√ú]{4,}/.test(msg)&&msg===msg.toUpperCase()){result.delta-=1;result.notes.push("‚ö†Ô∏è Bitte nicht BR√úLLEN.");mistakes.caps++;}
      if((msg.match(/!/g)||[]).length>=3||(msg.match(/\?/g)||[]).length>=3||/[!?]{2,}/.test(msg)){result.delta-=1;result.notes.push("‚ö†Ô∏è Zu viele Satzzeichen.");mistakes.punct++;}
      if((msg.match(/[\u{1F300}-\u{1FAFF}]/gu)||[]).length>=3){result.delta-=1;result.notes.push("‚ö†Ô∏è Zu viele Emojis.");mistakes.emoji++;}
      if(RUDE_PATTERNS.some(rx=>rx.test(msg))){result.delta-=1;result.notes.push("‚ö†Ô∏è Unh√∂fliche/vulg√§re Formulierung vermeiden.");mistakes.rude++;}
      if(/\bdu\b.*(bist|machst|hast).*(immer|nie|schlecht|falsch)/i.test(msg)){result.delta-=1;result.notes.push("‚ö†Ô∏è Vermeide DU-Unterstellungen.");mistakes.du++;}
      if(/ich\s*(finde|f√ºhle|denke|verstehe|m√∂chte|w√ºrde|glaube|habe|w√ºnsche)/i.test(msg)){result.delta+=1;result.notes.push("‚úÖ Gute Ich-Botschaft.");}
      if(/(kannst du|k√∂nntest du|was genau|wie meinst du|bitte genauer)/i.test(msg)){result.delta+=1;result.notes.push("‚úÖ Nachfragen erkannt.");}
      if(/(sorry|entschuldigung|lass uns|ruhig|kein problem|kl√§ren|gemeinsam)/i.test(msg)){result.delta+=1;result.notes.push("‚úÖ Deeskalation.");}
      if(/(gut gemacht|das stimmt|korrekt|richtig|gute idee|super|toll)/i.test(msg)){result.delta+=1;result.notes.push("‚úÖ Lob/Best√§tigung.");}
      return result;
    }

    function nextScene(){
      if(sceneIndex<SCENES.length){addBot(SCENES[sceneIndex]);sceneIndex++;}
      else{addBot("üéâ Super! Du hast alle Situationen durchgespielt.");}
    }

    function handleSend(){
      const text=(input.value||"").trim();if(!text)return;
      addYou(text);
      const evaln=analyzeMessage(text);
      setScore(evaln.delta);
      addBot(evaln.notes.length?evaln.notes.join(" ")+" (Score: "+score+")":"üëç Sehr h√∂flich! (Score: "+score+")");
      input.value="";updateSummary();
      setTimeout(nextScene,1500);
    }

    sendBtn.onclick=handleSend;
    input.addEventListener('keydown',e=>{if(e.key==='Enter')handleSend();});

    // Start
    nextScene();
    updateSummary();
  </script>
</body>
</html>
